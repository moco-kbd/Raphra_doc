
# Raphra ビルドガイド

- [Raphra ビルドガイド](#raphra-ビルドガイド)
  - [特徴](#特徴)
    - [注意事項](#注意事項)
  - [パーツ](#パーツ)
    - [内容物](#内容物)
    - [別途必要なパーツ](#別途必要なパーツ)
    - [組み立てに必要な道具等](#組み立てに必要な道具等)
    - [オプションパーツ](#オプションパーツ)
      - [ソケット化する場合に必要なパーツ](#ソケット化する場合に必要なパーツ)
      - [ロータリーエンコーダを実装する場合に必要なパーツ](#ロータリーエンコーダを実装する場合に必要なパーツ)
      - [バックライトを実装する場合に必要となるもの](#バックライトを実装する場合に必要となるもの)
  - [組み立て手順](#組み立て手順)
    - [1. 必要なパーツがすべて揃っていることを確認する](#1-必要なパーツがすべて揃っていることを確認する)
    - [2. Pro Microの取り付け](#2-pro-microの取り付け)
    - [3. ファームウェア書き込み](#3-ファームウェア書き込み)
    - [4. 動作確認](#4-動作確認)
    - [5. トッププレートを分割する](#5-トッププレートを分割する)
    - [6. TRRSコネクタ、リセットスイッチをハンダ付けする](#6-trrsコネクタリセットスイッチをハンダ付けする)
    - [7. トッププレートにchocスイッチを取り付ける](#7-トッププレートにchocスイッチを取り付ける)
    - [8. 実装基板にchocスイッチをハンダ付けする](#8-実装基板にchocスイッチをハンダ付けする)
    - [9. トッププレートにmxスイッチを取り付ける](#9-トッププレートにmxスイッチを取り付ける)
    - [10. 実装基板にmxスイッチをハンダ付けする](#10-実装基板にmxスイッチをハンダ付けする)
    - [11. ボトムプレートを取り付ける](#11-ボトムプレートを取り付ける)
      - [バックライトを実装する場合](#バックライトを実装する場合)
    - [12. Pro Microを取り付ける](#12-pro-microを取り付ける)
    - [13. Pro Microカバーを取り付ける](#13-pro-microカバーを取り付ける)
      - [ロータリーエンコーダを実装する場合](#ロータリーエンコーダを実装する場合)
    - [14. キーマップを変更する](#14-キーマップを変更する)

## 特徴

- 左右分割60キー キーボード
- 片手ごとに7つある親指キー
- 片手ごとに2種の手のひらキー
- Kailhソケット対応
- ダイオード実装済み
- Remap対応
- 片手あたり2つのロータリーエンコーダ

### 注意事項

- 本品は自作キーボードキットです。ご自分でハンダ付けを行う必要があります。
- キーキャップやスイッチ、Pro micro等は付属していません。
- 各部品には製造工程でついたキズや汚れ等が存在する場合があります。
- ロータリーエンコーダーを使用するにはご自分でファームウェアを作成する必要があります。

## パーツ

### 内容物

| 名前 | 数量 | 備考 |
| --- | --- | --- |
| トッププレート | 2 | |
| 実装基板 | 2 | |
| ボトムプレート | 2 | |
| m2スペーサー①(7mm) | 12 | |
| m2スペーサー②(6mm) | 4 | 少し太い |
| m2スペーサー③(4mm) | 2 | |
| m2ネジ(3mm) | 36 | |
| タクトスイッチ | 2 | |
| TRRSジャック | 2 | |
| ゴム足 | 8 | |

### 別途必要なパーツ

| 名前 | 数量 | 備考 |
| --- | --- | --- |
| MX互換スイッチ | 56 | |
| 1Uキーキャップ(MX用) | 50 | |
| 1.25Uキーキャップ(MX用) | 4 | 1Uも可(好み) |
| 1.75Uキーキャップ(MX用) | 2 | 1.5Uも可(好み) |
| Kailh choc v1スイッチ | 4 | |
| 1.5Uキーキャップ(choc用) | 4 | 1Uも可(好み) |
| Pro micro | 2 | |
| コンスルー(12ピン) XB-3-2.5-12P | 4 | |
| TRRSケーブル | 1 | |
| micro USBケーブル | 1 | |

### 組み立てに必要な道具等

- 一般的にはんだ付けに必要な道具類(必須)
- ペンチ(ほぼ必須)
- ヤスリ(任意)
- 縁を塗るマーカー(任意)

### オプションパーツ

<details>
<summary>開く</summary>

#### ソケット化する場合に必要なパーツ

| 名前 | 数量 | 備考 |
| --- | --- | --- |
| Kailh PCBソケット(MX用) CPG151101S11 | 56 | [遊舎工房](https://shop.yushakobo.jp/collections/all-keyboard-parts/products/a01ps?variant=37665172521121) |
| Kailh PCBソケット(choc用) CPG135001S30 | 4 | [遊舎工房](https://shop.yushakobo.jp/collections/all-keyboard-parts/products/a01ps?variant=37665172553889) |

※ ソケット実装時はバックライトが使用できません。

#### ロータリーエンコーダを実装する場合に必要なパーツ

| 名前 | 数量 | 備考 |
| --- | --- | --- |
| EC12E系ロータリーエンコーダ | 2 | 片手分 |
| 2ピン6mmコンスルー(XB-3-6-2P) | 1 | 片手分 |
| 4ピン6mmコンスルー(XB-3-6-4P) | 1 | 片手分 |

#### バックライトを実装する場合に必要となるもの

| 名前 | 数量 | 備考 |
| --- | --- | --- |
| WS2812B | 60 | [遊舎工房](https://shop.yushakobo.jp/products/a0800ws-01-10) |
| 2ピン6mmコンスルー(XB-3-2-3P) | 2 | |

※ バックライト実装時はソケットが使用できません。  
※ キーボード底面にVCCおよびGNDが露出するため必ず絶縁処理を施してください。

</details>

## 組み立て手順

### 1. 必要なパーツがすべて揃っていることを確認する

付属品に不足したものがないか、必要なパーツを用意したかを確認してください。

### 2. Pro Microの取り付け

以下のページを参考にPro Microにコンスルーを取り付けます。  
[コンスルー（スプリングピンヘッダ）の取り付け方を教えて下さい](https://yushakobo.zendesk.com/hc/ja/articles/360044233974-%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%AB%E3%83%BC-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%82%B0%E3%83%94%E3%83%B3%E3%83%98%E3%83%83%E3%83%80-%E3%81%AE%E5%8F%96%E3%82%8A%E4%BB%98%E3%81%91%E6%96%B9%E3%82%92%E6%95%99%E3%81%88%E3%81%A6%E4%B8%8B%E3%81%95%E3%81%84)  

Pro Micro、コンスルーには向きがあるため注意してください。  
Pro Micro側のみハンダ付けします。

### 3. ファームウェア書き込み

ファームウェアファイル`raphra_v2.hex`をダウンロードします。

[Pro Micro Web Updater](https://sekigon-gonnoc.github.io/promicro-web-updater/index.html)を使用し、
Pro Microに書き込みます。

### 4. 動作確認

各キーの接点同士をピンセット等でショートさせ、キーが入力できることを確認します。
動作確認が終わったら、一旦Pro Microを取り外します。

### 5. トッププレートを分割する

トッププレートは4つのパーツで構成されています。

1. メイントッププレート
2. 親指chocトッププレート
3. Pro Microカバー(エンコーダあり)
4. Pro Microカバー(エンコーダなし)

怪我に注意し、軽く力を込めて折ります。  
片側に残ったタブはペンチ等を使用して折り取ります。  

分割跡は触り心地や見た目が良くないのでヤスリがけしましょう。  

基板の縁を油性ペンで塗ると見た目が良くなります。

### 6. TRRSコネクタ、リセットスイッチをハンダ付けする

マスキングテープ等で固定してからハンダ付けするとやりやすいです。

### 7. トッププレートにchocスイッチを取り付ける

- ソケットを使用する場合
  - 逆さまに取り付けてください。

### 8. 実装基板にchocスイッチをハンダ付けする

- ソケットを使用する場合
  - ソケットを取り付け、ハンダ付けしてください。

### 9. トッププレートにmxスイッチを取り付ける

- ソケットを使用する場合
  - 逆さまに取り付けてください。

### 10. 実装基板にmxスイッチをハンダ付けする

- ソケットを使用する場合
  - ソケットを取り付け、ハンダ付けしてください。

### 11. ボトムプレートを取り付ける

スペーサーとネジを使用してトッププレートとボトムプレートを接続します。  
親指Choc部分にはm2スペーサー③を、それ以外はm2スペーサー①を使用します。  
  
#### バックライトを実装する場合

<details>
<summary>開く</summary>

バックライトの実装を行う場合、ボトムプレートの取り付け前にLEDとコンスルーを取り付けます。

1. WS2812Bを取り付けます。

2. コンスルーを取り付けます。

3. 底面に絶縁処理を施します。

</details>

### 12. Pro Microを取り付ける

Pro Microを取り付けます。

### 13. Pro Microカバーを取り付ける

スペーサー、ネジを使用してPro Microカバーを取り付けてください。

#### ロータリーエンコーダを実装する場合

<details>
<summary>開く</summary>

バックライトの実装を行う場合、ボトムプレートの取り付け前にLEDとコンスルーを取り付けます。

1. Pro Microカバーにロータリーエンコーダをハンダ付けします。
   - リセットスイッチと干渉するため、エンコーダのピンを曲げるあるいは短く切ってください。

2. コンスルーを取り付けます。
   - 4ピンのコンスルーは、右から2番目のピンを取り除いてください。(不要なVCC)
   - ハンダ付けは不要です。

3. Pro Microカバーを取り付けます。

</details>

### 14. キーマップを変更する

[Remap](https://remap-keys.app/)でキーマップを変更します。
`raphra.json`を読み込ませてください。
